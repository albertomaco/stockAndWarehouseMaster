<app-toolbar></app-toolbar>
<div class="ml-auto">
  <table class="table table-dark">
    <thead>
      <tr>
        <th scope="col"> </th>
        <th scope="col">Nombre</th>
        <th scope="col">Email</th>
        <th scope="col">Username</th>
        <th scope="col">Telefono</th>
        <th scope="col">Fecha alta</th>
        <th scope="col">Roles</th>
        <th scope="col"></th>
        <th scope="col"></th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let usuario of pagedUsuarios">
        <td></td>
        <td>{{usuario.nombre}}</td>
        <td>{{usuario.email}}</td>
        <td>{{usuario.username}}</td>
        <td>{{usuario.telefono}}</td>
        <td>{{usuario.fechaAlta | date: 'dd-MM-yyyy'}}</td>
        <td>
          <ul>
            <li *ngFor="let rol of usuario.roles">{{rol.name}}</li>
          </ul>
        </td>
        <td>
          <ng-select [items]="comboRoles" bindLabel="name" placeholder="" [multiple]="true"
            [(ngModel)]="rolesSeleccionados[usuario.id]">
          </ng-select>
          <button type="submit" class="btn btn-primary ms-2" (click)="guardarRolUsuario(usuario,rolesSeleccionados[usuario.id])">
            Cambiar roles
          </button>
        </td>
        <td><button class="btn btn-outline-danger" (click)="borrar(usuario)"><i class="far fa-trash-alt"></i>
            </button></td>
        <td><button class="btn btn-outline-warning" (click)="editar(usuario)"><i class="fa-regular fa-floppy-disk"></i>
            </button></td>
      </tr>
    </tbody>
  </table>
  <mat-paginator [length]="usuarios.length" [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 15]" showFirstLastButtons></mat-paginator>
</div>